{% extends "base.html" %}
{% block content %}
<style>
    body {
        background: #fce4ec; /* pastel pink background */
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
    }

    .signup-box {
        background: rgba(255, 255, 255, 0.85); /* transparent box */
        padding: 30px;
        border-radius: 15px;
        width: 350px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    .signup-box h2 {
        text-align: center;
        margin-bottom: 20px;
        color: #333;
    }

    .signup-box input, .signup-box select {
        width: 100%;
        padding: 10px;
        margin-bottom: 12px;
        border: 1px solid #ccc;
        border-radius: 8px;
        font-size: 14px;
    }

    .signup-box .error {
        color: red;
        font-size: 12px;
        height: 12px;
        margin-bottom: 5px;
    }

    .signup-box button {
        width: 100%;
        padding: 10px;
        background-color: #ff80ab; /* pastel pink button */
        border: none;
        border-radius: 8px;
        color: white;
        font-size: 16px;
        cursor: pointer;
    }

    .signup-box button:hover {
        background-color: #ff4081;
    }
</style>

<div class="signup-box">
    <h2>Sign Up</h2>
    <form method="POST" id="signupForm">
        <input type="text" name="username" placeholder="Username" required>
        <div class="error" id="usernameError"></div>

        <input type="email" name="email" placeholder="Email" required>
        <div class="error" id="emailError"></div>

        <input type="password" name="password" placeholder="Password" required>
        <div class="error" id="passwordError"></div>

        <input type="number" name="age" placeholder="Age" required>
        <div class="error" id="ageError"></div>

        <select name="gender" required>
            <option value="">Select Gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
        </select>
        <div class="error" id="genderError"></div>

        <input type="tel" name="phone" placeholder="Phone Number" required>
        <div class="error" id="phoneError"></div>

        <button type="submit">Sign Up</button>
    </form>
</div>

<script>
    const form = document.getElementById('signupForm');

    form.addEventListener('input', () => {
        // Username: 3-20 chars, letters, numbers, underscores
        const username = form.username.value.trim();
        const usernameRegex = /^[A-Za-z0-9_]{3,20}$/;
        document.getElementById('usernameError').innerText = usernameRegex.test(username) ? '' : '3â€“20 chars, letters, numbers or _';

        // Email
        const email = form.email.value.trim();
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/;
        document.getElementById('emailError').innerText = emailRegex.test(email) ? '' : 'Invalid email';

        // Password: 8+ chars, upper, lower, number, special
        const password = form.password.value;
        const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#\$%\^&\*\(\)_\+\-=\[\]\{\};:'",.<>\/\\|`~]).{8,}$/;
        document.getElementById('passwordError').innerText = passwordRegex.test(password) ? '' : '8+ chars, upper, lower, number, special';

        // Age: 1-120
        const age = form.age.value.trim();
        document.getElementById('ageError').innerText = (age && age >=1 && age <=120) ? '' : 'Age 1-120';

        // Gender
        const gender = form.gender.value;
        document.getElementById('genderError').innerText = ['Male','Female','Other'].includes(gender) ? '' : 'Select gender';

        // Phone: 7-15 digits, optional +country
        const phone = form.phone.value.trim();
        const phoneRegex = /^(\+?\d{1,3}[- ]?)?\d{7,15}$/;
        document.getElementById('phoneError').innerText = phoneRegex.test(phone) ? '' : 'Invalid phone';
    });

    form.addEventListener('submit', (e) => {
        // prevent submit if any error visible
        const errors = document.querySelectorAll('.error');
        for (let err of errors) {
            if (err.innerText !== '') {
                e.preventDefault();
                alert("Please fix errors before submitting!");
                return;
            }
        }
    });
</script>
{% endblock %}
